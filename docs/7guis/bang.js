(function(){var __webpack_modules__={876:function(__unused_webpack_module,exports,__webpack_require__){!function(e){const t=""+Math.random(),n=(()=>{try{return self.DOMParser&&!0}catch(e){return!1}})(),r=[Symbol,Boolean,Number,String,Object,Set,Map,WeakMap,WeakSet,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8ClampedArray,...n?[Node,NodeList,Element,HTMLElement,Blob,ArrayBuffer,FileList,Text,HTMLDocument,Document,DocumentFragment,Error,File,Event,EventTarget,URL]:[Buffer]],o=e=>null==e||null==e,a=new Map;function s(e,...t){const n=t.reduce(((t,n,r)=>t+n+e[r+1]),e[0]);if(!a.has(n))throw new TypeError(`Cannot use type ${n} before it is defined.`);return a.get(n).type}function i(e,t,{partial:n=!1}={}){b(e),g(e);const r=e.name,{spec:c,kind:u,help:f,verify:d,verifiers:h,sealed:m}=a.get(r),_=c?p(c).sort():[],w=new Set(_),E=[];switch(u){case"def":{let a=!0;if(c){const e=n?p(t,w):_;a=!o(t)&&e.every((e=>{const{resolved:n,errors:o}=l(t,e,(()=>{return t=l(c,e).resolved,n=s`None`,b(t),g(t),b(n),g(n),!(t!==n&&(!t.isSumType||!t.types.has(n))&&(!n.isSumType||!n.types.has(t))&&(!t.name.startsWith("?")||n!=s`None`)&&(!n.name.startsWith("?")||t!=s`None`)&&((t.name.startsWith(">")||n.name.startsWith(">"))&&console.error(new Error("Check type match has not been implemented for derived//sub types yet.")),1));var t,n}));if(E.push(...o),o.length)return!1;const a=l(c,e).resolved;if(!(a&&a instanceof y))return E.push({error:`Key path '${e}' is not present in the spec for type '${r}'`}),!1;const{valid:u,errors:f}=i(a,n);return E.push(...f),u}))}let u=!0;if(n&&!c&&d)throw new TypeError("Type checking with option 'partial' is not a valid option for types that only use a verify function but have no spec");if(d)try{if(u=d(t),!u){if(h)throw{error:`Type ${r} value '${JSON.stringify(t)}' violated at least 1 verify function in:\n${h.map((e=>"\t"+(e.help||"")+" ("+e.verify.toString()+")")).join("\n")}`};if(e.isSumType)throw{error:`Value '${JSON.stringify(t)}' did not match any of: ${[...e.types.keys()].map((e=>e.name))}`,verify:d,verifiers:h};{let e="";throw f&&(e=`Help: ${f}. `),{error:`${e}Type ${r} Value '${JSON.stringify(t)}' violated verify function in: ${d.toString()}`}}}}catch(e){E.push(e),u=!1}let T=!0;if(m&&c){const e=_,n=p(t,w).sort();if(T=n.join(",")==e.join(","),!T)if(n.length<e.length)T=!0;else{const t=[],o=new Set(e);for(const e of n)o.has(e)||t.push({error:`Key path '${e}' is not in the spec for type ${r}`});t.length&&E.push(...t)}}return{valid:a&&u&&T,errors:E,partial:n}}case"defCollection":{const{valid:e,errors:r}=i(c.container,t);let o=!0,a=!0;if(E.push(...r),n)throw new TypeError("Type checking with option 'partial' is not a valid option for Collection types");if(e&&(o=[...t].every((e=>{const{valid:t,errors:n}=i(c.member,e);return E.push(...n),t}))),d)try{a=d(t)}catch(e){E.push(e),a=!1}return{valid:e&&o&&a,errors:E}}default:throw new TypeError(`Checking for type kind ${u} is not yet implemented.`)}}function c(...e){return i(...e).valid}function l(e,t,n){if(o(e))throw new TypeError("Lookup requires a non-unset object.");if(!t)throw new TypeError("keyPath must not be empty");const r=t.split(/\./g),a=[],s=[];let i=e;for(;r.length;){const e=r.shift();if(i=i[e],a.push(e),null==i){r.length?s.push({error:`Lookup on key path '${t}' failed at '`+a.join(".")+`' when ${i} was found at '${e}'.`}):n&&n()?i=void 0:s.push({error:`Resolution on key path '${t}' failedwhen ${i} was found at '${e}' and the Type of thiskey's value cannot be None.`});break}}return{resolved:i,errors:s}}function u(e,t,{verify:n,help:r=""}={},o=""){let a;if(b(e),g(e),n||(n=()=>!0),e.native){a=[{help:r,verify:n}],n=t=>t instanceof e.native;const t=`Needs to be of type ${e.native.name}. ${r||""}`;a.push({help:t,verify:n})}return m(`${o}>${e.name}`,t,{verify:n,help:r,verifiers:a})}function f(e){return a.has(e)}function d(e){if(f(e))throw new TypeError(`Type ${e} cannot be redefined.`)}function p(e,t){const n=!t;return function e(r,o,a=""){if(_(r))return[];const s=Object.getOwnPropertyNames(r),i=s.map((e=>a+(a.length?".":"")+e));return s.forEach(((a,s)=>{const c=r[a];if(n)if(c instanceof y)o.add(i[s]);else{if("object"!=typeof c)throw new TypeError("Spec cannot contain leaf values that are not valid Types");if(Array.isArray(c))throw new TypeError("We don't support Types that use Arrays as structure, just yet.");e(c,o,i[s])}else t.has(i[s])?o.add(i[s]):"object"==typeof c?"_self"===a||(Array.isArray(c)?c.forEach(((t,n)=>e(t,o,i[s]+"."+n))):e(c,o,i[s])):o.add(i[s])})),[...o]}(e,new Set,"")}function h(e){b(e);const t=e.name;return s.def(`?${t}`,null,{verify:t=>_(t)||s.check(e,t)})}function y(e,t={}){if(!new.target)throw new TypeError("Type with new only.");if(Object.defineProperty(this,"name",{get:()=>e}),this.typeName=e,t.types){const{types:e}=t,n=new Set(e);Object.defineProperty(this,"isSumType",{get:()=>!0}),Object.defineProperty(this,"types",{get:()=>n})}if(t.native){const{native:e}=t;Object.defineProperty(this,"native",{get:()=>e})}}function m(e,t,{help:n="",verify:r,sealed:o,types:s,verifiers:i,native:c}={}){if(!e)throw new TypeError("Type must be named.");if(d(e),e.startsWith("?")){if(t)throw new TypeError("Option type can not have a spec.");if(!r(null))throw new TypeError("Option type must be OK to be unset.")}void 0===o&&(o=!0);const l=new y(e,{types:s,native:c}),u={spec:t,kind:"def",help:n,verify:r,verifiers:i,sealed:o,types:s,native:c,type:l};return a.set(e,u),l}function b(e){if(!(e instanceof y))throw new TypeError("Type must be a valid Type object.")}function g(e){const t=w(e);if(!f(t))throw new TypeError(`Type must exist. Type ${t} has not been defined.`)}function _(e){return null==e}function w(e){if(e&&e.name)return e.name;const t=Object.prototype.toString.call(e).replace(/\[object |\]/g,"");return t.endsWith("Constructor")?t.replace(/Constructor$/,""):t}s.def=m,s.check=c,s.sub=function(e){return s`>${e.name}`},s.verify=function(...e){return c(...e)},s.validate=i,s.partialMatch=function(e,t){return i(e,t,{partial:!0})},s.defEnum=function(e,...t){if(!e)throw new TypeError("Type must be named.");d(e);const n=new Set(t);return m(e,null,{verify:e=>n.has(e),help:`Value of Enum type ${e} must be one of ${t.join(",")}`})},s.defSub=u,s.defTuple=function(e,{pattern:t}){if(!e)throw new TypeError("Type must be named.");if(!t)throw new TypeError("Type must be specified.");const n={};t.forEach(((e,t)=>n[t]=e));const r=new y(e),o={kind:"def",spec:n,type:r};return a.set(e,o),r},s.defCollection=function(e,{container:t,member:n},{sealed:r=true,verify:o}={}){if(!e)throw new TypeError("Type must be named.");if(!t||!n)throw new TypeError("Type must be specified.");d(e);const s=new y(e),i={kind:"defCollection",spec:{container:t,member:n},verify:o,sealed:r,type:s};return a.set(e,i),s},s.defOr=function(e,...t){return s.def(e,null,{types:t,verify:e=>t.some((t=>c(t,e)))})},s.option=function(e){return s`?${e.name}`},s.defOption=h,s.maybe=function(e){try{return h(e)}catch(e){}return s`?${e.name}`},s.guard=function(e,t){b(e),g(e);const{valid:n,errors:r}=i(e,t);if(!n)throw new TypeError(`Type ${e} requested, but item is not of that type: ${r.join(", ")}`)},s.errors=function(...e){return i(...e).errors},s[Symbol.for("jtype-system.typeCache")]=a,s.def("Any",null,{verify:()=>!0}),s.def("Some",null,{verify:e=>!_(e)}),s.def("None",null,{verify:e=>_(e)}),s.def("Function",null,{verify:e=>e instanceof Function}),s.def("Integer",null,{verify:e=>Number.isInteger(e)}),s.def("Array",null,{verify:e=>Array.isArray(e)}),s.def("Iterable",null,{verify:e=>e[Symbol.iterator]instanceof Function}),r.forEach((e=>m(w(e),null,{native:e,verify:t=>w(t.constructor)===w(e)}))),r.forEach((e=>u(s`${w(e)}`))),y.prototype.toString=function(){return`${this.typeName} Type`},s.defOr("KeyValue",s`String`,s`Number`),s.def("Key",{key:s`KeyValue`,kill:s.defOption(s`Boolean`)});const E=s.def("Handlers",null,{verify:e=>{if(!s.check(s`Object`,e))return!1;const t=Object.keys(e),n=Object.values(e),r=t.every((e=>s.check(s`String`,e))),o=n.every((e=>s.check(s`Function`,e)));return r&&o}});s.defCollection("FuncArray",{container:s`Array`,member:s`Function`}),s.def("EmptyArray",null,{verify:e=>Array.isArray(e)&&0==e.length}),s.def("MarkupObject",{type:s`String`,code:s`String`,nodes:s`Array`,externals:s`Array`},{verify:e=>"MarkupObject"==e.type&&e.code==t}),s.def("MarkupAttrObject",{type:s`String`,code:s`String`,str:s`String`},{verify:e=>"MarkupAttrObject"==e.type&&e.code==t}),s.def("VanillaViewLikeObject",{instance:s.maybe(s`Key`),cacheKey:s.maybe(s`String`),code:s`String`,externals:s`Array`,nodes:s`Array`,to:s`Function`,update:s`Function`,v:s`Array`,oldVals:s`Array`}),s.def("VanillaViewObject",{instance:s.maybe(s`Key`),cacheKey:s.maybe(s`String`),code:s`String`,externals:s`Array`,nodes:s`Array`,to:s`Function`,update:s`Function`,v:s`Array`,oldVals:s`Array`},{verify:e=>function(e){return t===e.code}(e)}),s.def("BangObject",null,{verify:e=>e[Symbol.for("BANG-VV")]}),s.defOr("Component",s`VanillaViewObject`,s`BangObject`),s.defCollection("VanillaViewArray",{container:s`Array`,member:s`Component`}),s.def("SVanillaViewObject",{str:s`String`,handlers:E}),s.defCollection("SVanillaViewArray",{container:s`Array`,member:s`SVanillaViewObject`});const T=K,S=J,v=()=>{},k=/(?:<!\-\-)?(key\d+)(?:\-\->)?/gm,A=/\w+=/,O=20,N=e=>`'key' property must be a string. Was: ${e.key}`,C=new class{beforeend(e,t){t.appendChild(e)}beforebegin(e,t){t.parentNode.insertBefore(e,t)}afterend(e,t){t.parentNode.insertBefore(e,t.nextSibling)}replace(e,t){t.parentNode.replaceChild(e,t)}afterbegin(e,t){t.insertBefore(e,t.firstChild)}innerhtml(e,t){t.innerHTML="",t.appendChild(e)}insert(e,t){t.replaceChildren(e)}},j=new Map;globalThis.onerror=(...e)=>(console.log(e,e[0]+"",e[4]&&e[4].message,e[4]&&e[4].stack),!0);const $=e=>s.check(s`Key`,e),x={};async function F(e,...t){const n=this;let r,o=!1;if(0===e[0].length&&t[0].state&&(o=!0),o)return({state:r}=t.shift()),e.shift(),t=await Promise.all(t.map((e=>V(n,e,r)))),M(e,t);{const r=async r=>(t=await Promise.all(t.map((e=>V(n,e,r)))),M(e,t));return r}}function B(e,...t){return M(e,t,{useCache:!1})}function M(e,n,{useCache:r=!0}={}){const o={};let a,i;if(n=n.map(z),r){a=n.find($)||{},i=e.join("<link rel=join>");const{cached:t,firstCall:r}=function(e,t,n){let r,o=x[e];return null==o?(o=x[e]={},void 0!==n.key&&(o.instances={},o=o.instances[n.key]={}),r=!0):void 0!==n.key?o.instances?(o=o.instances[n.key],o?!0===n.kill?(o=x[e],o&&o.instances&&(o.instances[n.key]=null),o=null,r=!0):r=!1:r=!0):(o.instances={},r=!0):r=!1,{cached:o,firstCall:r}}(i,0,a);if(!r)return t.update(n),t;o.oldVals=Array.from(n)}else o.oldVals=Array.from(n);e=[...e];const c={},l=n.map(function(e){return(t,n)=>{if(s.check(s`Key`,t))return"";const r=("key"+Math.random()).replace(".","").padEnd(O,"0").slice(0,O);let o=r;return(s.check(s`VanillaViewObject`,t)||s.check(s`MarkupObject`,t))&&(o=`\x3c!--${o}--\x3e`),e[r.trim()]={vi:n,val:t,replacers:[]},o}}(c)),u=[];let f="";for(;e.length>1;)f+=e.shift()+l.shift();f+=e.shift();const d=Y(f),p=document.createTreeWalker(d,NodeFilter.SHOW_ALL);do{G({walker:p,vmap:c,externals:u})}while(p.nextNode());return Object.assign(o,{externals:u,v:Object.values(c),cacheKey:i,instance:a,to:D,update:Z,code:t,nodes:[...d.childNodes]}),r&&(void 0!==a.key?x[i].instances[a.key]=o:x[i]=o,o.nodes.forEach((e=>{j.set(e,JSON.stringify({cacheKey:i,instanceKey:a.key+""}))}))),o}async function V(e,t,n){if("string"==typeof t)return t;if("number"==typeof t)return t+"";if("boolean"==typeof t)return t+"";if(t instanceof Date)return t+"";if(P(t)){if(e.CONFIG.allowUnset)return e.CONFIG.unsetPlaceholder||"";throw new TypeError(`Value cannot be unset, was: ${t}`)}if(t instanceof Promise)return await V(e,await t.catch((e=>e+"")),n);if(t instanceof Element)return t.outerHTML;if(t instanceof Node)return t.textContent;const r=s.check(s`VanillaViewArray`,t);if(null!==(o=t)&&o[Symbol.iterator]instanceof Function&&!r)return V(e,await Promise.all((await Promise.all(Array.from(t)).catch((e=>err+""))).map((t=>V(e,t,n)))),n);var o;const a=$(t),i=s.check(s`MarkupObject`,t),c=s.check(s`MarkupAttrObject`,t),l=s.check(s`Component`,t);if(r||a||i||c||l)return r?X(t):t;if("AsyncFunction"===Object.getPrototypeOf(t).constructor.name)return await V(e,await t(n),n);if(t instanceof Function)return t(n);{let n;if(Object.prototype.hasOwnProperty.call(t,e.CONFIG.bangKey)){n=new e.StateKey(t[e.CONFIG.bangKey])+"";const r=e.STATE.get(n);e.STATE.delete(r),e.STATE.set(n,t),e.STATE.set(t,n)}else{if(e.STATE.has(t)){n=e.STATE.get(t);const r=e.STATE.get(n+".json.last");JSON.stringify(t)!==r&&(e.STATE.delete(r),n.startsWith("system-key")&&(e.STATE.delete(n),n=new e.StateKey+""),e.STATE.set(n,t),e.STATE.set(t,n))}else n=new e.StateKey+"",e.STATE.set(n,t),e.STATE.set(t,n);e.STATE.set(JSON.stringify(t),n+".json.last"),e.STATE.set(n+".json.last",JSON.stringify(t))}return n+="",n}}function P(e){return null==e}function D(e,t){const n=(t||"replace").toLocaleLowerCase(),r=document.createDocumentFragment();this.nodes.forEach((e=>r.appendChild(e)));const o=e instanceof Node?e:document.querySelector(e);try{C[n](r,o)}catch(t){switch(t.constructor&&t.constructor.name){case"DOMException":Q({error:"Error inserting template into DOM. Position must be one of: replace, beforebegin, afterbegin, beforeend, innerhtml, afterend"});break;case"TypeError":Q({error:(a=e,`Error inserting template into DOM. Location ${a} was not found in the document.`)});break;default:throw t}}for(var a;this.externals.length;)this.externals.shift()()}function G({walker:e,vmap:t,externals:n}){const r=e.currentNode;switch(r.nodeType){case Node.ELEMENT_NODE:!function({node:e,vmap:t,externals:n}){I(e).forEach((({name:r,value:o}={})=>{const a={node:e,vmap:t,externals:n,name:r,lengths:[]};k.lastIndex=0;let s=k.exec(r);for(;s;)U(s,a,{updateName:!0}),s=k.exec(r);for(k.lastIndex=0,s=k.exec(o);s;)U(s,a,{updateName:!1}),s=k.exec(o)}))}({node:r,vmap:t,externals:n});break;case Node.COMMENT_NODE:case Node.TEXT_NODE:!function({node:e,vmap:t,externals:n}){const r=[],o=e.nodeValue;let a=k.exec(o);for(;a;){const{index:s}=a,i=t[a[1]],c=L({node:e,index:s,lengths:r,val:i});n.push((()=>c(i.val))),i.replacers.push(c),a=k.exec(o)}}({node:r,vmap:t,externals:n})}}function L(e){const{node:t}=e,n=Object.assign({},e,{oldVal:{length:O},oldNodes:[t],lastAnchor:t});return e=>{if(n.oldVal!=e)switch(n.val.val=e,R(e)){case"markupobject":case"vanillaviewobject":!function(e,t){let{oldNodes:n,lastAnchor:r}=t;if(e.nodes.length)if(o=n,a=e.nodes,o.length==a.length&&Array.from(o).every(((e,t)=>e==a[t])));else{const n=[];for(Array.from(e.nodes).forEach((e=>{if(document.contains(e.ownerDocument))for(;n.length;){const t=n.shift();e.parentNode.insertBefore(t,e)}else n.push(e)}));n.length;){const e=n.shift();r.parentNode.insertBefore(e,r)}t.lastAnchor=e.nodes[e.nodes.length-1]}else{const e=function(e){let t=[...e.parentNode.childNodes].find((e=>e.isConnected&&e.nodeType==Node.COMMENT_NODE&&"vanillaview_placeholder"==e.nodeValue));return t||(t=Y("\x3c!--vanillaview_placeholder--\x3e").firstChild),t}(r);r.parentNode.insertBefore(e,r.nextSibling),t.lastAnchor=e}var o,a;const s=(i=n,c=e.nodes,i=new Set(i),c=new Set(c),new Set([...i].filter((e=>!c.has(e)))));var i,c;if(s.size){const e=document.createDocumentFragment(),t=new Set;s.forEach((n=>{if(e.appendChild(n),n.linkedCustomElement&&e.appendChild(n.linkedCustomElement),n.nodeType===Node.COMMENT_NODE&&n.textContent.match(/key\d+/))return;const r=j.get(n);t.add(r)})),t.forEach((e=>{const{cacheKey:t,instanceKey:n}=JSON.parse(e);t&&n?x[t].instances[n]=null:t&&(x[t]=null)}))}for(t.oldNodes=e.nodes||[r];e.externals.length;)e.externals.shift()()}(e,n);break;default:!function(e,t){let{oldVal:n,index:r,val:o,lengths:a,node:s}=t;const i=o.vi,c=Object.keys(a.slice(0,i)).length*O,l=a.slice(0,i).reduce(((e,t)=>e+t),0),u=s.nodeValue;a[i]=e.length;const f=l-c,d=u.slice(0,r+f)+e+u.slice(r+f+n.length);s.nodeValue=d,s.linkedCustomElement&&d!==n&&function(e){const t=e.linkedCustomElement,n=Y(`<span ${e.textContent}></span>`).firstChild,r=new Set(I(t).filter((({name:e})=>!e.startsWith("on"))).map((({name:e})=>e)));I(n).forEach((({name:e,value:n})=>{e!==t.localName&&(e.startsWith("on")||(t.setAttribute(e,n),r.delete(e)))})),r.forEach((e=>t.removeAttribute(e)))}(s),t.oldVal=e}(e,n)}}}function U(e,t,{updateName:n}){const{index:r,input:o}=e,a=Object.assign({},t,{index:r,input:o,updateName:n,val:t.vmap[e[1]],oldVal:{length:O},oldName:t.name});let i;i=n?function(e){let{oldName:t,node:n,val:r}=e;return e=>{if(t==e)return;r.val=e;const o=n.hasAttribute(t)?t:"";if(o!==e){if(o&&(n.removeAttribute(t),n[t]=void 0),e){let t,r=e=e.trim();if(A.test(e)){const n=e.indexOf("=");[r,t]=[e.slice(0,n),e.slice(n+1)]}q(n,r,t)}t=e}}}(a):function(e){const t=t=>{if(e.oldVal!=t)switch(e.val.val=t,R(t)){case"funcarray":!function(e,t){let{oldVal:n,node:r,name:o,externals:a}=t;if(n&&!Array.isArray(n)&&(n=[n]),"bond"!==o){let t={};o.includes(":")&&([o,...t]=o.split(":"),t=t.reduce(((e,t)=>(e[t]=!0,e)),{})),n&&n.forEach((e=>r.removeEventListener(o,e,t))),e.forEach((e=>r.addEventListener(o,e,t)))}else n&&n.forEach((e=>{const t=a.indexOf(e);t>=0&&a.splice(t,1)})),e.forEach((e=>a.push((()=>e(r)))));t.oldVal=e}(t,e);break;case"function":!function(e,t){let{oldVal:n,node:r,name:o,externals:a}=t;if("bond"!==o){let t={};o.includes(":")&&([o,...t]=o.split(":"),t=t.reduce(((e,t)=>(e[t]=!0,e)),{})),n&&r.removeEventListener(o,n,t),r.addEventListener(o,e,t),q(r,o,"")}else{if(n){const e=a.indexOf(n);e>=0&&a.splice(e,1)}a.push((()=>e(r)))}t.oldVal=e}(t,e);break;case"handlers":!function(e,t){let{oldVal:n,node:r,externals:o}=t;n&&s.check(s`Handlers`,n)&&Object.entries(n).forEach((([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce(((e,t)=>(e[t]=!0,e)),{})),console.log(e,t,n),r.removeEventListener(e,t,n)}else{const e=o.indexOf(t);e>=0&&o.splice(e,1)}})),Object.entries(e).forEach((([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce(((e,t)=>(e[t]=!0,e)),{})),r.addEventListener(e,t,n)}else o.push((()=>t(r)))})),t.oldVal=e}(t,e);break;case"markupobject":case"vanillaviewobject":H(t=function(e){const t=document.createDocumentFragment();e.forEach((e=>t.appendChild(e.cloneNode(!0))));const n=document.createElement("body");return n.appendChild(t),n.innerHTML}(t.nodes),e);break;case"markupattrobject":t=t.str;default:H(t,e)}};return t(e.val.val),t}(a),a.externals.push((()=>i(a.val.val))),a.val.replacers.push(i)}function I(e){if(!e.hasAttribute)return[];if(e.hasAttribute("class")&&e.setAttribute("class",W(e.getAttribute("class"))),e.attributes&&Number.isInteger(e.attributes.length))return Array.from(e.attributes);const t=[];for(const n of e)e.hasAttribute(n)&&t.push({name:n,value:e.getAttribute(n)});return t}function H(e,t){let{oldVal:n,node:r,index:o,name:a,val:s,lengths:i}=t,c=0;const l=s.vi,u=Object.keys(i.slice(0,l)).length*O;"class"==a&&(0==(e=e.trim()).length&&(c=-1),t.val.val=e),i[l]=e.length+c;let f=r.getAttribute(a);const d=i.slice(0,l).reduce(((e,t)=>e+t),0)-u,p=f.slice(0,o+d),h=f.slice(o+d+n.length);let y;if("class"==a){const t=0==n.length?" ":"";y=p+t+e+t+h}else y=p+e+h;q(r,a,y),t.oldVal=e}function q(e,t,n){"class"==t&&(n=W(n));try{e.setAttribute(t,P(n)?t:n)}catch(e){}if("style"!==t)try{e[t]=!!P(n)||n}catch(e){}}function R(e){return s.check(s`Function`,e)?"function":s.check(s`Handlers`,e)?"handlers":s.check(s`VanillaViewObject`,e)?"vanillaviewobject":s.check(s`MarkupObject`,e)?"markupobject":s.check(s`MarkupAttrObject`,e)?"markupattrobject":s.check(s`VanillaViewArray`,e)?"vanillaviewarray":s.check(s`FuncArray`,e)?"funcarray":"default"}function K(e){const n=Y(e=s.check(s`None`,e)?"":e);return{type:"MarkupObject",code:t,nodes:[...n.childNodes],externals:[]}}function J(e){return e=(e=s.check(s`None`,e)?"":e).replace(/"/g,"&quot;"),{type:"MarkupAttrObject",code:t,str:e}}function W(e){return(e=e.trim()).replace(/\s+/g," ")}function Y(e){const t=(new DOMParser).parseFromString(`<template>${e}</template>`,"text/html").head.firstElementChild;let n;if(t instanceof HTMLTemplateElement)return n=t.content,n.normalize(),n;throw new TypeError(`Could not find template element after parsing string to DOM:\n=START=\n${e}\n=END=`)}function z(e){const t=s.check(s`Function`,e),n=s.check(s`None`,e),r=s.check(s`Object`,e),o=s.check(s`VanillaViewArray`,e),a=s.check(s`FuncArray`,e),i=s.check(s`MarkupObject`,e),c=s.check(s`MarkupAttrObject`,e),l=s.check(s`VanillaViewObject`,e),u=s.check(s`VanillaViewLikeObject`,e)&&!l;return t||l||$(e)||(e=>s.check(s`Handlers`,e))(e)?e:o?X(e):a||i||c?e:(n&&Q({error:"Unset values not allowed here."}),u&&Q({error:"Possible XSS / object forgery attack detected. Object code could not be verified."}),r&&("key"===Object.keys(e).join(",")?Q({error:N(e)}):Q({error:"Object values not allowed here."})),e+"")}function X(e){const n=[],r=[];return e.forEach((e=>{n.push(...e.externals),r.push(...e.nodes)})),{v:[],code:t,oldVals:[],nodes:r,to:D,update:Z,externals:n}}function Z(e){this.v.filter((({vi:t})=>function(e,t){const[n,r]=[e,t].map(R);let o;if(n!=r)o=!0;else switch(n){case"vanillaviewobject":case"funcarray":case"function":case"vanillaviewarray":case"markupattrobject":case"markupobject":o=!0;break;default:o=JSON.stringify(e)!==JSON.stringify(t)}return o}(e[t],this.oldVals[t]))).forEach((({vi:t,replacers:n})=>n.forEach((n=>n(e[t]))))),this.oldVals=Array.from(e)}function Q(e,t){throw e.stack=(new Error).stack.split(/\s*\n\s*/g),JSON.stringify(e,null,2)}Object.assign(F,{say:function(e){},attrskip:S,skip:T,attrmarkup:J,markup:K,guardEmptyHandlers:function(e){return Array.isArray(e)?0==e.length?[v]:e:s.check(s`None`,e)?v:void 0},die:Q}),Object.assign(globalThis,{vanillaview:{c:B,s:F,T:s}}),e.c=B,e.s=F,Object.defineProperty(e,"__esModule",{value:!0})}(exports),function(){const DEBUG=!1,OPTIMIZE=!0,GET_ONLY=!0,LEGACY=!1,MOBILE=isMobile(),DOUBLE_BARREL=/\w+-\w*/,F=_FUNC,FUNC_CALL=/\);?$/,MirrorNode=Symbol.for("[[MirroNode]]"),path=location.pathname,CONFIG={htmlFile:"markup.html",scriptFile:"script.js",styleFile:"style.css",bangKey:"_bang_key",componentsPath:`${path}${path.endsWith("/")?"":"/"}components`,allowUnset:!1,unsetPlaceholder:"",EVENTS:"error load click pointerdown pointerup pointermove mousedown mouseup \n        mousemove touchstart touchend touchmove touchcancel dblclick dragstart dragend \n        dragmove drag mouseover mouseout focus blur focusin focusout scroll\n        input change compositionstart compositionend text paste beforepast select cut copy\n        contextmenu\n      ".split(/\s+/g).filter((e=>e.length)).map((e=>`on${e}`)),delayFirstPaintUntilLoaded:!0,noHandlerPassthrough:!1},History=[],STATE=new Map,CACHE=new Map,Started=new Set,TRANSFORMING=new WeakSet,Dependents=new Map,Counts={started:0,finished:0},OBSERVE_OPTS={subtree:!0,childList:!0,characterData:!0};let hindex=0,observer,systemKeys=1,_c$;const BangBase=e=>class t extends HTMLElement{static#e=["state"];static get observedAttributes(){return Array.from(t.#e)}#t=e;constructor({task:t=(()=>{})}={}){super(),DEBUG&&say("log",e,"constructed"),this.print().then(t)}get name(){return this.#t}async print(){Counts.started++,this.alreadyPrinted||this.prepareVisibility();const e=this.handleAttrs(this.attributes);if(OPTIMIZE){const t=JSON.stringify(e);if(this.alreadyPrinted&&this.lastState===t)return void(DEBUG&&console.log(this,"state no change, returning"));this.lastState=t}return this.printShadow(e).then((()=>this.alreadyPrinted=!0))}connectedCallback(){say("log",e,"connected"),this.handleAttrs(this.attributes,{originals:!0})}prepareVisibility(){this.classList.add("bang-el"),this.classList.remove("bang-styled"),fetchStyle(e).catch((e=>this.setVisible()))}setVisible(){this.classList.add("bang-styled")}attributeChangedCallback(e,t,n){"state"!==e||isUnset(t)||STATE.get(t+".json.last")!==JSON.stringify(STATE.get(n))&&(DEBUG&&say("log","Changing state, so calling print.",t,n,this),this.print())}handleAttrs(e,{node:t,originals:n}={}){let r={};t||(t=this);for(let{name:o,value:a}of e)if(!isUnset(a))if("state"===o){const e=a,s=cloneState(e);if(isUnset(s))throw new TypeError(`\n                <${o}> constructor passed state key ${e} which is unset. It must be set.\n              `);if(r=s,n){let n=Dependents.get(e);n||(n=new Set,Dependents.set(e,n)),n.add(t),DEBUG&&console.log({acquirers:n,Dependents:Dependents})}}else if(n){if(!o.startsWith("on"))continue;if(a=a.trim(),!a)continue;const e=()=>t[a],n=()=>t.getRootNode().host[a],r=e()?"this.":n()?"this.getRootNode().host.":null;if(!r)continue;if(a.startsWith(r))continue;const s=a.match(FUNC_CALL)||"function"!=typeof e()&&"function"!=typeof n()?"":"(event)";t.setAttribute(o,`${r}${a}${s}`)}return r}printShadow(e){return fetchMarkup(this.#t,this).then((async t=>{const n=await cook.call(this,t,e);if(DEBUG&&console.log(n),LEGACY){const t=toDOM(n);if(t.querySelectorAll(CONFIG.EVENTS.map((e=>`[${e}]`)).join(", ")).forEach((e=>this.handleAttrs(e.attributes,{node:e,originals:!0}))),DEBUG&&say("log",t,n,e),this.shadowRoot)this.shadowRoot.replaceChildren(t);else{const e=this.attachShadow({mode:"open"});console.log({observer:observer}),observer.observe(e,OBSERVE_OPTS),e.replaceChildren(t)}}else if(this.shadowRoot);else{const e=this.attachShadow({mode:"open"});observer.observe(e,OBSERVE_OPTS),n.to(e,"insert"),e.querySelectorAll(CONFIG.EVENTS.map((e=>`[${e}]`)).join(", ")).forEach((e=>this.handleAttrs(e.attributes,{node:e,originals:!0})))}})).catch((e=>DEBUG&&say("warn",e))).finally((()=>Counts.finished++))}};class StateKey extends String{constructor(e){super(null==e?"system-key:"+systemKeys++:`client-key:${e}`)}}async function use(name){let component;await fetchScript(name).then((script=>{const Base=BangBase(name),Compose=`(function () { ${Base.toString()}; return ${script}; }())`;try{component=eval(Compose)}catch(e){DEBUG&&say("warn",e,Compose,component)}})).catch((()=>{component=BangBase(name)})),self.customElements.define(name,component),DEBUG&&self.customElements.whenDefined(name).then((e=>say("log",name,"defined",e)))}function undoState(e,t=(e=>e)){for(;hindex>0;)if(hindex-=1,History[hindex].name===e)return setState(e,t(History[hindex].value)),DEBUG&&console.log("Undo state to",History[hindex],hindex,History),!0;return!1}function redoState(e,t=(e=>e)){for(;hindex<History.length-1;)if(hindex+=1,History[hindex].name===e)return setState(e,t(History[hindex].value)),DEBUG&&console.log("Redo state to",History[hindex],hindex,History),!0;return!1}function bangfig(e={}){Object.assign(CONFIG,e)}function setState(e,t,{rerender:n=!0,save:r=!1}={}){if(GET_ONLY)if(STATE.has(e)){DEBUG&&console.log("Updating state",e);const n=STATE.get(e),r=STATE.get(e+".json.last");if(JSON.stringify(t)!==r){DEBUG&&console.log("State really changed. Will update",e),Object.assign(n,t),STATE.delete(r),e.startsWith("system-key:")&&(STATE.delete(e),STATE.delete(e+".json.last"),e=new StateKey,STATE.set(e,n),STATE.set(n,e));const o=JSON.stringify(n);STATE.set(e+".json.last",o),STATE.set(o,e+".json.last")}}else STATE.set(e,t),STATE.set(t,e),DEBUG&&console.log("Setting stringified state",t,e),STATE.set(JSON.stringify(t),e+".json.last"),STATE.set(e+".json.last",JSON.stringify(t));else STATE.set(e,t),STATE.set(t,e),STATE.set(JSON.stringify(t),e+".json.last"),STATE.set(e+".json.last",JSON.stringify(t));if(r&&(hindex=Math.min(hindex+1,History.length),History.splice(hindex,0,{name:e,value:clone(t)}),DEBUG&&console.log("set state history add",hindex,History.length-1,History)),n){const t=Dependents.get(e);DEBUG&&console.log({acquirers:t,Dependents:Dependents}),t&&t.forEach((e=>e.print()))}}function patchState(e,t){return setState(e,t,{rerender:!1})}function cloneState(e,t=GET_ONLY){if(t)return STATE.get(e);if(STATE.has(e))return clone(STATE.get(e));throw new TypeError(`State store does not have the key ${e}`)}async function loaded(){return becomesTrue((()=>{const e=Counts.started>0,t=Counts.finished===Counts.started;return e&&t}))}async function bangLoaded(){return becomesTrue((()=>"function"==typeof _c$))}async function install(){Object.assign(globalThis,{use:use,setState:setState,patchState:patchState,cloneState:cloneState,loaded:loaded,sleep:sleep,bangfig:bangfig,bangLoaded:bangLoaded,isMobile:isMobile,trace:trace,undoState:undoState,redoState:redoState,dateString:dateString,...DEBUG?{STATE:STATE,CACHE:CACHE,TRANSFORMING:TRANSFORMING,Started:Started,BangBase:BangBase}:{}});const e=globalThis.vanillaview||await __webpack_require__.e(185).then(__webpack_require__.bind(__webpack_require__,185)),{s:t}=e,n={STATE:STATE,CONFIG:CONFIG,StateKey:StateKey};_c$=t.bind(n),n._c$=_c$,CONFIG.delayFirstPaintUntilLoaded&&becomesTrue((()=>document.body)).then((()=>document.body.classList.add("bang-el"))),observer=new MutationObserver(transformBangs),observer.observe(document,OBSERVE_OPTS),findBangs(transformBang),loaded().then((()=>document.body.classList.add("bang-styled")))}async function fetchMarkup(e,t){const n=`markup:${e}`;Started.has(n)?CACHE.has(n)||await becomesTrue((()=>CACHE.has(n))):Started.add(n);const r=`style${e}`,o=`${CONFIG.componentsPath}/${e}`;if(CACHE.has(n)){const e=CACHE.get(n);if(CACHE.get(r)instanceof Error&&t.setVisible(),!(CACHE.get(r)instanceof Error&&e.includes(`href=${o}/${CONFIG.styleFile}`)))return t.setVisible(),e}const a=`${o}/${CONFIG.htmlFile}`;let s;return await fetch(a).then((async n=>{let o="";return o=n.ok?await n.text():"<slot></slot>",CACHE.get(r)instanceof Error?(s=`<style>\n            @import url('${CONFIG.componentsPath}/style.css');\n          </style>${o}`,t.setVisible()):(s=`<style>\n            @import url('${CONFIG.componentsPath}/style.css');\n            ${await fetchStyle(e).then((t=>t instanceof Error?`/* no ${e}/style.css defined */`:t))}\n          </style>${o}`,t.setVisible()),s})).finally((async()=>CACHE.set(n,await s)))}async function fetchFile(e,t){const n=`${t}:${e}`;if(Started.has(n)?CACHE.has(n)||await becomesTrue((()=>CACHE.has(n))):Started.add(n),CACHE.has(n))return CACHE.get(n);const r=`${CONFIG.componentsPath}/${e}/${t}`;let o;return await fetch(r).then((e=>{if(e.ok)return o=e.text(),o;throw o=new TypeError(`Fetch error: ${r}, ${e.statusText}`),o})).finally((async()=>CACHE.set(n,await o)))}async function fetchStyle(e){return fetchFile(e,CONFIG.styleFile)}async function fetchScript(e){return fetchFile(e,CONFIG.scriptFile)}function transformBangs(e){e.forEach((e=>{DEBUG&&say("log",e);const{addedNodes:t}=e;t&&t.forEach((e=>findBangs(transformBang,e)))}))}function transformBang(e){DEBUG&&say("log",{transformBang:transformBang},{current:e});const[t,n]=getBangDetails(e);DEBUG&&say("log",{name:t,data:n});const r=createElement(t,n);e.linkedCustomElement=r,r[MirrorNode]=e,e.parentNode.replaceChild(r,e)}function findBangs(e,t=document.documentElement){const n={acceptNode(e){if(e.nodeType!==Node.COMMENT_NODE)return NodeFilter.FILTER_SKIP;const[t]=getBangDetails(e);return t.match(DOUBLE_BARREL)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},r=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,n),o=[];let a=r.currentNode;if(n.acceptNode(a)===NodeFilter.FILTER_ACCEPT&&!TRANSFORMING.has(a)){TRANSFORMING.add(a);const e=a;o.push((()=>transformBang(e)))}for(;a=r.nextNode(),a;)if(!TRANSFORMING.has(a)){TRANSFORMING.add(a);const e=a;o.push((()=>transformBang(e)))}for(;o.length;)o.pop()()}function getBangDetails(e){const t=e.textContent.trim(),[n,...r]=t.split(/[\s\t]/g);return[n,r.join(" ")]}async function process(e,t){if("string"==typeof e)return e;if("number"==typeof e)return e+"";if("boolean"==typeof e)return e+"";if(e instanceof Date)return e+"";if(isUnset(e)){if(CONFIG.allowUnset)return CONFIG.unsetPlaceholder||"";throw new TypeError(`Value cannot be unset, was: ${e}`)}if(e instanceof Promise)return await e.catch((e=>e+""));if(e instanceof Element)return e.outerHTML;if(e instanceof Node)return e.textContent;if(isIterable(e))return(await Promise.all((await Promise.all(Array.from(e)).catch((e=>err+""))).map((e=>process(e,t))))).join(" ");if("AsyncFunction"===Object.getPrototypeOf(e).constructor.name)return await e(t);if(e instanceof Function)return e(t);{let t;if(Object.prototype.hasOwnProperty.call(e,CONFIG.bangKey)){t=new StateKey(e[CONFIG.bangKey])+"";const n=STATE.get(t);JSON.stringify(n)!==JSON.stringify(e)&&(STATE.delete(n),STATE.set(t,e),STATE.set(e,t),STATE.set(JSON.stringify(e),t+".json.last"),STATE.set(t+".json.last",JSON.stringify(e)))}else STATE.has(JSON.stringify(e))?t=STATE.get(JSON.stringify(e)):(t=new StateKey+"",STATE.set(t,e),STATE.set(e,t),STATE.set(JSON.stringify(e),t+".json.last"),STATE.set(t+".json.last",JSON.stringify(e)));return t+="",DEBUG&&say("log",{stateKey:t}),t}}async function cook(markup,state){const that=this;let cooked="";try{Object.prototype.hasOwnProperty.call(state,"_self")||Object.defineProperty(state,"_self",{get:()=>state}),DEBUG&&say("log","_self",state._self)}catch(e){DEBUG&&say("warn","Cannot add '_self' self-reference property to state. \n            This enables a component to inspect the top-level state object it is passed.")}try{with(state)cooked=await eval("(async function () { return await _FUNC`${{state}}"+markup+"`; }())");return DEBUG&&console.log({cooked:cooked}),cooked}catch(error){throw say("error","Template error",{markup:markup,state:state,error:error}),error}}async function _FUNC(e,...t){const n=Array.from(e);return await _c$(n,...t)}async function old_FUNC(e,...t){const n=Array.from(e);let r=!1,o="";if(DEBUG&&say("log",n.join("${}")),0===n[0].length&&t[0].state&&(r=!0),r){const{state:e}=t.shift();for(n.shift(),t=await Promise.all(t.map((t=>process(t,e)))),DEBUG&&say("log","System _FUNC call: "+t.join(", "));n.length;)o+=n.shift(),t.length&&(o+=t.shift());return o}return async e=>{for(t=await Promise.all(t.map((t=>process(t,e)))),DEBUG&&say("log","in-template _FUNC call:"+t.join(", "));n.length;)o+=n.shift(),t.length&&(o+=t.shift());return o}}function createElement(e,t){const n=document.createDocumentFragment(),r=document.createElement("div");return n.appendChild(r),r.insertAdjacentHTML("afterbegin",`<${e} ${t}></${e}>`),r.firstElementChild}function toDOM(e){const t=(new DOMParser).parseFromString(`<template>${e}</template>`,"text/html").head.firstElementChild.content;return t.normalize(),t}async function becomesTrue(e=(()=>!0)){return new Promise((async t=>{for(;await sleep(47),!e(););t()}))}async function sleep(e){return new Promise((t=>setTimeout(t,e)))}function isIterable(e){return null!==e&&e[Symbol.iterator]instanceof Function}function isUnset(e){return null==e}function say(e,...t){(DEBUG||"error"===e||e.endsWith("!"))&&MOBILE&&alert(`${e}: ${t.join("\n")}`),(DEBUG||"error"===e||e.endsWith("!"))&&console[e.replace("!","")](...t)}function isMobile(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((e=>navigator.userAgent.match(e)))}function trace(e=""){const t=new Error("Trace");console.log(e,"Call stack",t.stack)}function dateString(e){const t=e.getTimezoneOffset();return(e=new Date(e.getTime()-60*t*1e3)).toISOString().split("T")[0]}function clone(e){return JSON.parse(JSON.stringify(e))}install()}()}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return e+".bang.js"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},inProgress={},dataWebpackPrefix="bang.html:",__webpack_require__.l=function(e,t,n,r){if(inProgress[e])inProgress[e].push(t);else{var o,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),i=0;i<s.length;i++){var c=s[i];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+n){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",dataWebpackPrefix+n),o.src=e),inProgress[e]=[t];var l=function(t,n){o.onerror=o.onload=null,clearTimeout(u);var r=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(n)})),t)return t(n)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),a&&document.head.appendChild(o)}},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e}(),function(){var e={179:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=o);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var r,o,a=n[0],s=n[1],i=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);i&&i(__webpack_require__)}for(t&&t(n);c<a.length;c++)o=a[c],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[a[c]]=0},n=self.webpackChunkbang_html=self.webpackChunkbang_html||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__(876)})();