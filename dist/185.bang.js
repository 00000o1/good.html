"use strict";(globalThis.webpackChunkbangbang=globalThis.webpackChunkbangbang||[]).push([[185],{185:(e,t,n)=>{n.r(t),n.d(t,{c:()=>D,s:()=>L});const r=""+Math.random(),o=(()=>{try{return self.DOMParser&&!0}catch(e){return!1}})(),a=[Symbol,Boolean,Number,String,Object,Set,Map,WeakMap,WeakSet,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8ClampedArray,...o?[Node,NodeList,Element,HTMLElement,Blob,ArrayBuffer,FileList,Text,HTMLDocument,Document,DocumentFragment,Error,File,Event,EventTarget,URL]:[Buffer]],i=e=>null==e||null==e,s=new Map;function c(e,...t){const n=t.reduce(((t,n,r)=>t+n+e[r+1]),e[0]);if(!s.has(n))throw new TypeError(`Cannot use type ${n} before it is defined.`);return s.get(n).type}function l(e,t,{partial:n=!1}={}){w(e),g(e);const r=e.name,{spec:o,kind:a,help:u,verify:d,verifiers:p,sealed:h}=s.get(r),m=o?y(o).sort():[],v=new Set(m),k=[];switch(a){case"def":{let a=!0;if(o){const e=n?y(t,v):m;a=!i(t)&&e.every((e=>{const{resolved:n,errors:a}=f(t,e,(()=>{return t=f(o,e).resolved,n=c`None`,w(t),g(t),w(n),g(n),!(t!==n&&(!t.isSumType||!t.types.has(n))&&(!n.isSumType||!n.types.has(t))&&(!t.name.startsWith("?")||n!=c`None`)&&(!n.name.startsWith("?")||t!=c`None`)&&((t.name.startsWith(">")||n.name.startsWith(">"))&&console.error(new Error("Check type match has not been implemented for derived//sub types yet.")),1));var t,n}));if(k.push(...a),a.length)return!1;const i=f(o,e).resolved;if(!(i&&i instanceof b))return k.push({error:`Key path '${e}' is not present in the spec for type '${r}'`}),!1;const{valid:s,errors:u}=l(i,n);return k.push(...u),s}))}let s=!0;if(n&&!o&&d)throw new TypeError("Type checking with option 'partial' is not a valid option for types that only use a verify function but have no spec");if(d)try{if(s=d(t),!s){if(p)throw{error:`Type ${r} value '${JSON.stringify(t)}' violated at least 1 verify function in:\n${p.map((e=>"\t"+(e.help||"")+" ("+e.verify.toString()+")")).join("\n")}`};if(e.isSumType)throw{error:`Value '${JSON.stringify(t)}' did not match any of: ${[...e.types.keys()].map((e=>e.name))}`,verify:d,verifiers:p};{let e="";throw u&&(e=`Help: ${u}. `),{error:`${e}Type ${r} Value '${JSON.stringify(t)}' violated verify function in: ${d.toString()}`}}}}catch(e){k.push(e),s=!1}let T=!0;if(h&&o){const e=m,n=y(t,v).sort();if(T=n.join(",")==e.join(","),!T)if(n.length<e.length)T=!0;else{const t=[],o=new Set(e);for(const e of n)o.has(e)||t.push({error:`Key path '${e}' is not in the spec for type ${r}`});t.length&&k.push(...t)}}return{valid:a&&s&&T,errors:k,partial:n}}case"defCollection":{const{valid:e,errors:r}=l(o.container,t);let a=!0,i=!0;if(k.push(...r),n)throw new TypeError("Type checking with option 'partial' is not a valid option for Collection types");if(e&&(a=[...t].every((e=>{const{valid:t,errors:n}=l(o.member,e);return k.push(...n),t}))),d)try{i=d(t)}catch(e){k.push(e),i=!1}return{valid:e&&a&&i,errors:k}}default:throw new TypeError(`Checking for type kind ${a} is not yet implemented.`)}}function u(...e){return l(...e).valid}function f(e,t,n){if(i(e))throw new TypeError("Lookup requires a non-unset object.");if(!t)throw new TypeError("keyPath must not be empty");const r=t.split(/\./g),o=[],a=[];let s=e;for(;r.length;){const e=r.shift();if(s=s[e],o.push(e),null==s){r.length?a.push({error:`Lookup on key path '${t}' failed at '`+o.join(".")+`' when ${s} was found at '${e}'.`}):n&&n()?s=void 0:a.push({error:`Resolution on key path '${t}' failedwhen ${s} was found at '${e}' and the Type of thiskey's value cannot be None.`});break}}return{resolved:s,errors:a}}function d(e,t,{verify:n,help:r=""}={},o=""){let a;if(w(e),g(e),n||(n=()=>!0),e.native){a=[{help:r,verify:n}],n=t=>t instanceof e.native;const t=`Needs to be of type ${e.native.name}. ${r||""}`;a.push({help:t,verify:n})}return v(`${o}>${e.name}`,t,{verify:n,help:r,verifiers:a})}function p(e){return s.has(e)}function h(e){if(p(e))throw new TypeError(`Type ${e} cannot be redefined.`)}function y(e,t){const n=!t;return function e(r,o,a=""){const i=Object.getOwnPropertyNames(r),s=i.map((e=>a+(a.length?".":"")+e));return i.forEach(((a,i)=>{const c=r[a];if(n)if(c instanceof b)o.add(s[i]);else{if("object"!=typeof c)throw new TypeError("Spec cannot contain leaf values that are not valid Types");if(Array.isArray(c))throw new TypeError("We don't support Types that use Arrays as structure, just yet.");e(c,o,s[i])}else t.has(s[i])?o.add(s[i]):"object"==typeof c?"_self"===a||(Array.isArray(c)?c.forEach(((t,n)=>e(t,o,s[i]+"."+n))):e(c,o,s[i])):o.add(s[i])})),[...o]}(e,new Set,"")}function m(e){w(e);const t=e.name;return c.def(`?${t}`,null,{verify:t=>k(t)||c.check(e,t)})}function b(e,t={}){if(!new.target)throw new TypeError("Type with new only.");if(Object.defineProperty(this,"name",{get:()=>e}),this.typeName=e,t.types){const{types:e}=t,n=new Set(e);Object.defineProperty(this,"isSumType",{get:()=>!0}),Object.defineProperty(this,"types",{get:()=>n})}if(t.native){const{native:e}=t;Object.defineProperty(this,"native",{get:()=>e})}}function v(e,t,{help:n="",verify:r,sealed:o,types:a,verifiers:i,native:c}={}){if(!e)throw new TypeError("Type must be named.");if(h(e),e.startsWith("?")){if(t)throw new TypeError("Option type can not have a spec.");if(!r(null))throw new TypeError("Option type must be OK to be unset.")}void 0===o&&(o=!0);const l=new b(e,{types:a,native:c}),u={spec:t,kind:"def",help:n,verify:r,verifiers:i,sealed:o,types:a,native:c,type:l};return s.set(e,u),l}function w(e){if(!(e instanceof b))throw new TypeError("Type must be a valid Type object.")}function g(e){const t=T(e);if(!p(t))throw new TypeError(`Type must exist. Type ${t} has not been defined.`)}function k(e){return null==e}function T(e){if(e&&e.name)return e.name;const t=Object.prototype.toString.call(e).replace(/\[object |\]/g,"");return t.endsWith("Constructor")?t.replace(/Constructor$/,""):t}c.def=v,c.check=u,c.sub=function(e){return c`>${e.name}`},c.verify=function(...e){return u(...e)},c.validate=l,c.partialMatch=function(e,t){return l(e,t,{partial:!0})},c.defEnum=function(e,...t){if(!e)throw new TypeError("Type must be named.");h(e);const n=new Set(t);return v(e,null,{verify:e=>n.has(e),help:`Value of Enum type ${e} must be one of ${t.join(",")}`})},c.defSub=d,c.defTuple=function(e,{pattern:t}){if(!e)throw new TypeError("Type must be named.");if(!t)throw new TypeError("Type must be specified.");const n={};t.forEach(((e,t)=>n[t]=e));const r=new b(e),o={kind:"def",spec:n,type:r};return s.set(e,o),r},c.defCollection=function(e,{container:t,member:n},{sealed:r=!0,verify:o}={}){if(!e)throw new TypeError("Type must be named.");if(!t||!n)throw new TypeError("Type must be specified.");h(e);const a=new b(e),i={kind:"defCollection",spec:{container:t,member:n},verify:o,sealed:r,type:a};return s.set(e,i),a},c.defOr=function(e,...t){return c.def(e,null,{types:t,verify:e=>t.some((t=>u(t,e)))})},c.option=function(e){return c`?${e.name}`},c.defOption=m,c.maybe=function(e){try{return m(e)}catch(e){}return c`?${e.name}`},c.guard=function(e,t){w(e),g(e);const{valid:n,errors:r}=l(e,t);if(!n)throw new TypeError(`Type ${e} requested, but item is not of that type: ${r.join(", ")}`)},c.errors=function(...e){return l(...e).errors},c[Symbol.for("jtype-system.typeCache")]=s,c.def("Any",null,{verify:()=>!0}),c.def("Some",null,{verify:e=>!k(e)}),c.def("None",null,{verify:e=>k(e)}),c.def("Function",null,{verify:e=>e instanceof Function}),c.def("Integer",null,{verify:e=>Number.isInteger(e)}),c.def("Array",null,{verify:e=>Array.isArray(e)}),c.def("Iterable",null,{verify:e=>e[Symbol.iterator]instanceof Function}),a.forEach((e=>v(T(e),null,{native:e,verify:t=>T(t.constructor)===T(e)}))),a.forEach((e=>d(c`${T(e)}`))),b.prototype.toString=function(){return`${this.typeName} Type`};const E=c;c.defOr("KeyValue",c`String`,c`Number`);c.def("Key",{key:c`KeyValue`});const A=c.def("Handlers",null,{verify:e=>{if(!c.check(c`Object`,e))return!1;const t=Object.keys(e),n=Object.values(e),r=t.every((e=>c.check(c`String`,e))),o=n.every((e=>c.check(c`Function`,e)));return r&&o}});c.defCollection("FuncArray",{container:c`Array`,member:c`Function`}),c.def("EmptyArray",null,{verify:e=>Array.isArray(e)&&0==e.length}),c.def("MarkupObject",{type:c`String`,code:c`String`,nodes:c`Array`,externals:c`Array`},{verify:e=>"MarkupObject"==e.type&&e.code==r}),c.def("MarkupAttrObject",{type:c`String`,code:c`String`,str:c`String`},{verify:e=>"MarkupAttrObject"==e.type&&e.code==r}),c.def("VanillaViewLikeObject",{code:c`String`,externals:c`Array`,nodes:c`Array`,to:c`Function`,update:c`Function`,v:c`Array`,oldVals:c`Array`}),c.def("VanillaViewObject",{code:c`String`,externals:c`Array`,nodes:c`Array`,to:c`Function`,update:c`Function`,v:c`Array`,oldVals:c`Array`},{verify:e=>function(e){return r===e.code}(e)});c.def("BangObject",null,{verify:e=>e[Symbol.for("BANG-VV")]}),c.defOr("Component",c`VanillaViewObject`,c`BangObject`),c.defCollection("VanillaViewArray",{container:c`Array`,member:c`Component`}),c.def("SVanillaViewObject",{str:c`String`,handlers:A}),c.defCollection("SVanillaViewArray",{container:c`Array`,member:c`SVanillaViewObject`});const O=G,j=q,N=()=>{},S=/(?:<!\-\-)?(key\d+)(?:\-\->)?/gm,V=/\w+=/,x=20,$=e=>`'key' property must be a string. Was: ${e.key}`,C=new class{beforeend(e,t){t.appendChild(e)}beforebegin(e,t){t.parentNode.insertBefore(e,t)}afterend(e,t){t.parentNode.insertBefore(e,t.nextSibling)}replace(e,t){t.parentNode.replaceChild(e,t)}afterbegin(e,t){t.insertBefore(e,t.firstChild)}innerhtml(e,t){t.innerHTML="",t.appendChild(e)}insert(e,t){t.replaceChildren(e)}};globalThis.onerror=(...e)=>(console.log(e,e[0]+"",e[4]&&e[4].message,e[4]&&e[4].stack),!0);const M=e=>E.check(E`Key`,e),F={};async function L(e,...t){const n=this;let r,o=!1;if(0===e[0].length&&t[0].state&&(o=!0),o)return({state:r}=t.shift()),e.shift(),t=await Promise.all(t.map((e=>I(n,e,r)))),P(e,t);{const r=async r=>(t=await Promise.all(t.map((e=>I(n,e,r)))),P(e,t));return r}}function D(e,...t){return P(e,t,{useCache:!1})}function P(e,t,{useCache:n=!0}={}){const o={};let a,i;if(t=t.map(X),n){({key:a}=t.find(M)||{}),i=e.join("<link rel=join>");const{cached:n,firstCall:r}=function(e,t,n){let r,o=F[e];return null==o?(o=F[e]={},void 0!==n&&(o.instances={},o=o.instances[n]={}),r=!0):void 0!==n?o.instances?(o=o.instances[n],r=!o):(o.instances={},r=!0):r=!1,{cached:o,firstCall:r}}(i,0,a);if(!r)return n.update(t),n;o.oldVals=Array.from(t)}else o.oldVals=Array.from(t);e=[...e];const s={},c=t.map(function(e){return(t,n)=>{if(E.check(E`Key`,t))return"";const r=("key"+Math.random()).replace(".","").padEnd(x,"0").slice(0,x);let o=r;return(E.check(E`VanillaViewObject`,t)||E.check(E`MarkupObject`,t))&&(o=`\x3c!--${o}--\x3e`),e[r.trim()]={vi:n,val:t,replacers:[]},o}}(s)),l=[];let u="";for(;e.length>1;)u+=e.shift()+c.shift();u+=e.shift();const f=z(u),d=document.createTreeWalker(f,NodeFilter.SHOW_ALL);do{H({walker:d,vmap:s,externals:l})}while(d.nextNode());return Object.assign(o,{externals:l,v:Object.values(s),to:B,update:Y,code:r,nodes:[...f.childNodes]}),n&&(void 0!==a?F[i].instances[a]=o:F[i]=o),o}async function I(e,t,n){if("string"==typeof t)return t;if("number"==typeof t)return t+"";if("boolean"==typeof t)return t+"";if(t instanceof Date)return t+"";if(function(e){return null==e}(t)){if(e.CONFIG.allowUnset)return e.CONFIG.unsetPlaceholder||"";throw new TypeError(`Value cannot be unset, was: ${t}`)}if(t instanceof Promise)return await I(e,await t.catch((e=>e+"")),n);if(t instanceof Element)return t.outerHTML;if(t instanceof Node)return t.textContent;const r=E.check(E`VanillaViewArray`,t),o=M(t),a=E.check(E`MarkupObject`,t),i=E.check(E`MarkupAttrObject`,t),s=E.check(E`Component`,t);if(r||o||a||i||s)return r?Q(t):t;if(null!==(c=t)&&c[Symbol.iterator]instanceof Function)return I(e,await Promise.all((await Promise.all(Array.from(t)).catch((e=>err+""))).map((t=>I(e,t,n)))),n);if("AsyncFunction"===Object.getPrototypeOf(t).constructor.name)return await I(e,await t(n),n);if(t instanceof Function)return t(n);{let n;if(Object.prototype.hasOwnProperty.call(t,e.CONFIG.bangKey)){n=new e.StateKey(t[e.CONFIG.bangKey])+"";const r=e.STATE.get(n);e.STATE.delete(r),e.STATE.set(n,t),e.STATE.set(t,n)}else e.STATE.has(t)?n=e.STATE.get(t):(n=new e.StateKey+"",e.STATE.set(n,t),e.STATE.set(t,n));return n+="",n}var c}function B(e,t){const n=(t||"replace").toLocaleLowerCase(),r=document.createDocumentFragment();this.nodes.forEach((e=>r.appendChild(e)));const o=e instanceof Node?e:document.querySelector(e);try{C[n](r,o)}catch(t){switch(t.constructor&&t.constructor.name){case"DOMException":Z({error:"Error inserting template into DOM. Position must be one of: replace, beforebegin, afterbegin, beforeend, innerhtml, afterend"});break;case"TypeError":Z({error:(a=e,`Error inserting template into DOM. Location ${a} was not found in the document.`)});break;default:throw t}}for(var a;this.externals.length;)this.externals.shift()()}function H({walker:e,vmap:t,externals:n}){const r=e.currentNode;switch(r.nodeType){case Node.ELEMENT_NODE:!function({node:e,vmap:t,externals:n}){(function(e){if(!e.hasAttribute)return[];if(e.hasAttribute("class")&&e.setAttribute("class",R(e.getAttribute("class"))),e.attributes&&Number.isInteger(e.attributes.length))return Array.from(e.attributes);const t=[];for(const n of e)e.hasAttribute(n)&&t.push({name:n,value:e.getAttribute(n)});return t})(e).forEach((({name:r,value:o}={})=>{const a={node:e,vmap:t,externals:n,name:r,lengths:[]};S.lastIndex=0;let i=S.exec(r);for(;i;)W(i,a,{updateName:!0}),i=S.exec(r);for(S.lastIndex=0,i=S.exec(o);i;)W(i,a,{updateName:!1}),i=S.exec(o)}))}({node:r,vmap:t,externals:n});break;case Node.COMMENT_NODE:case Node.TEXT_NODE:!function({node:e,vmap:t,externals:n}){const r=[],o=e.nodeValue;let a=S.exec(o);for(;a;){const{index:i}=a,s=t[a[1]],c=K({node:e,index:i,lengths:r,val:s});n.push((()=>c(s.val))),s.replacers.push(c),a=S.exec(o)}}({node:r,vmap:t,externals:n})}}function K(e){const{node:t}=e,n=Object.assign({},e,{oldVal:{length:x},oldNodes:[t],lastAnchor:t});return e=>{if(n.oldVal!=e)switch(n.val.val=e,J(e)){case"markupobject":case"vanillaviewobject":!function(e,t){let{oldNodes:n,lastAnchor:r}=t;if(e.nodes.length)if(o=n,a=e.nodes,o.length==a.length&&Array.from(o).every(((e,t)=>e==a[t])));else{const t=!1,o=[];for(t&&console.log("\n"),Array.from(e.nodes).forEach((e=>{if(document.contains(e.ownerDocument))for(t&&console.dirxml("already inserted",e,`${o.length} to insert before`);o.length;){const t=o.shift();e.parentNode.insertBefore(t,e)}else t&&console.dirxml("not yet inserted",e),o.push(e)})),t&&console.log("\n");o.length;){const e=o.shift();t&&console.log({insertee:e,lastAnchor:r,oldNodes:n}),r.parentNode.insertBefore(e,r)}t&&console.log("Inserts done")}else{const e=function(e){let t=[...e.parentNode.childNodes].find((e=>e.nodeType==Node.COMMENT_NODE&&"vanillaview_placeholder"==e.nodeValue));return t||(t=z("\x3c!--vanillaview_placeholder--\x3e").firstChild),t}(r);r.parentNode.insertBefore(e,r.nextSibling),t.lastAnchor=e}var o,a;const i=(s=n,c=e.nodes,s=new Set(s),c=new Set(c),new Set([...s].filter((e=>!c.has(e)))));var s,c;if(i.size){const e=document.createDocumentFragment();i.forEach((t=>e.appendChild(t)))}for(t.oldNodes=e.nodes||[r];e.externals.length;)e.externals.shift()()}(e,n);break;default:!function(e,t){let{oldVal:n,index:r,val:o,lengths:a,node:i}=t;const s=o.vi,c=Object.keys(a.slice(0,s)).length*x,l=a.slice(0,s).reduce(((e,t)=>e+t),0),u=i.nodeValue;a[s]=e.length;const f=l-c,d=u.slice(0,r+f)+e+u.slice(r+f+n.length);i.nodeValue=d,i.linkedCustomElement&&d.match(/state[\s\S]*=/gm)&&i.linkedCustomElement.setAttribute("state",e),t.oldVal=e}(e,n)}}}function W(e,t,{updateName:n}){const{index:r,input:o}=e,a=Object.assign({},t,{index:r,input:o,updateName:n,val:t.vmap[e[1]],oldVal:{length:x},oldName:t.name});let i;i=n?function(e){let{oldName:t,node:n,val:r}=e;return e=>{if(t==e)return;r.val=e;const o=n.hasAttribute(t)?t:"";if(o!==e){if(o&&(n.removeAttribute(t),n[t]=void 0),e){let t,r=e=e.trim();if(V.test(e)){const n=e.indexOf("=");[r,t]=[e.slice(0,n),e.slice(n+1)]}U(n,r,t)}t=e}}}(a):function(e){const t=t=>{if(e.oldVal!=t)switch(e.val.val=t,J(t)){case"funcarray":!function(e,t){let{oldVal:n,node:r,name:o,externals:a}=t;if(n&&!Array.isArray(n)&&(n=[n]),"bond"!==o){let t={};o.includes(":")&&([o,...t]=o.split(":"),t=t.reduce(((e,t)=>(e[t]=!0,e)),{})),n&&n.forEach((e=>r.removeEventListener(o,e,t))),e.forEach((e=>r.addEventListener(o,e,t)))}else n&&n.forEach((e=>{const t=a.indexOf(e);t>=0&&a.splice(t,1)})),e.forEach((e=>a.push((()=>e(r)))));t.oldVal=e}(t,e);break;case"function":!function(e,t){let{oldVal:n,node:r,name:o,externals:a}=t;if("bond"!==o){let t={};o.includes(":")&&([o,...t]=o.split(":"),t=t.reduce(((e,t)=>(e[t]=!0,e)),{})),n&&r.removeEventListener(o,n,t),r.addEventListener(o,e,t),U(r,o,"")}else{if(n){const e=a.indexOf(n);e>=0&&a.splice(e,1)}a.push((()=>e(r)))}t.oldVal=e}(t,e);break;case"handlers":!function(e,t){let{oldVal:n,node:r,externals:o}=t;n&&E.check(E`Handlers`,n)&&Object.entries(n).forEach((([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce(((e,t)=>(e[t]=!0,e)),{})),console.log(e,t,n),r.removeEventListener(e,t,n)}else{const e=o.indexOf(t);e>=0&&o.splice(e,1)}})),Object.entries(e).forEach((([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce(((e,t)=>(e[t]=!0,e)),{})),r.addEventListener(e,t,n)}else o.push((()=>t(r)))})),t.oldVal=e}(t,e);break;case"markupobject":case"vanillaviewobject":_(t=function(e){const t=document.createDocumentFragment();e.forEach((e=>t.appendChild(e.cloneNode(!0))));const n=document.createElement("body");return n.appendChild(t),n.innerHTML}(t.nodes),e);break;case"markupattrobject":t=t.str;default:_(t,e)}};return t(e.val.val),t}(a),a.externals.push((()=>i(a.val.val))),a.val.replacers.push(i)}function _(e,t){let{oldVal:n,node:r,index:o,name:a,val:i,lengths:s}=t,c=0;const l=i.vi,u=Object.keys(s.slice(0,l)).length*x;"class"==a&&(0==(e=e.trim()).length&&(c=-1),t.val.val=e),s[l]=e.length+c;let f=r.getAttribute(a);const d=s.slice(0,l).reduce(((e,t)=>e+t),0)-u,p=f.slice(0,o+d),h=f.slice(o+d+n.length);let y;if("class"==a){const t=0==n.length?" ":"";y=p+t+e+t+h}else y=p+e+h;U(r,a,y),t.oldVal=e}function U(e,t,n){"class"==t&&(n=R(n));try{e.setAttribute(t,n)}catch(e){}try{e[t]=null==n||n}catch(e){}}function J(e){return E.check(E`Function`,e)?"function":E.check(E`Handlers`,e)?"handlers":E.check(E`VanillaViewObject`,e)?"vanillaviewobject":E.check(E`MarkupObject`,e)?"markupobject":E.check(E`MarkupAttrObject`,e)?"markupattrobject":E.check(E`VanillaViewArray`,e)?"vanillaviewarray":E.check(E`FuncArray`,e)?"funcarray":"default"}function G(e){const t=z(e=E.check(E`None`,e)?"":e);return{type:"MarkupObject",code:r,nodes:[...t.childNodes],externals:[]}}function q(e){return e=(e=E.check(E`None`,e)?"":e).replace(/"/g,"&quot;"),{type:"MarkupAttrObject",code:r,str:e}}function R(e){return(e=e.trim()).replace(/\s+/g," ")}function z(e){const t=(new DOMParser).parseFromString(`<template>${e}</template>`,"text/html").head.firstElementChild;let n;if(t instanceof HTMLTemplateElement)return n=t.content,n.normalize(),n;throw new TypeError(`Could not find template element after parsing string to DOM:\n=START=\n${e}\n=END=`)}function X(e){const t=E.check(E`Function`,e),n=E.check(E`None`,e),r=E.check(E`Object`,e),o=E.check(E`VanillaViewArray`,e),a=E.check(E`FuncArray`,e),i=E.check(E`MarkupObject`,e),s=E.check(E`MarkupAttrObject`,e),c=E.check(E`VanillaViewObject`,e),l=E.check(E`VanillaViewLikeObject`,e)&&!c;return t||c||M(e)||(e=>E.check(E`Handlers`,e))(e)?e:o?Q(e):a||i||s?e:(n&&Z({error:"Unset values not allowed here."}),l&&Z({error:"Possible XSS / object forgery attack detected. Object code could not be verified."}),r&&("key"===Object.keys(e).join(",")?Z({error:$(e)}):Z({error:"Object values not allowed here."})),e+"")}function Q(e){const t=[],n=[];return e.forEach((e=>{t.push(...e.externals),n.push(...e.nodes)})),{v:[],code:r,oldVals:[],nodes:n,to:B,update:Y,externals:t}}function Y(e){this.v.filter((({vi:t})=>function(e,t){const[n,r]=[e,t].map(J);let o;if(n!=r)o=!0;else switch(n){case"vanillaviewobject":case"funcarray":case"function":case"vanillaviewarray":case"markupattrobject":case"markupobject":o=!0;break;default:o=JSON.stringify(e)!==JSON.stringify(t)}return o}(e[t],this.oldVals[t]))).forEach((({vi:t,replacers:n})=>n.forEach((n=>n(e[t]))))),this.oldVals=Array.from(e)}function Z(e,t){throw e.stack=(new Error).stack.split(/\s*\n\s*/g),JSON.stringify(e,null,2)}Object.assign(L,{say:function(e){},attrskip:j,skip:O,attrmarkup:q,markup:G,guardEmptyHandlers:function(e){return Array.isArray(e)?0==e.length?[N]:e:E.check(E`None`,e)?N:void 0},die:Z}),Object.assign(globalThis,{vanillaview:{c:D,s:L,T:E}})}}]);